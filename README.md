# Дипломный проект по профессии «Fullstack-разработчик на Python»

## Облачное хранилище My Cloud

### Структура проекта
В папке `backend` лежат исходники для серверной части. Она собрана на базе приложения Джанго и базы данных `PostgreSQL`

В папке `frontend` лежат исходники клиентской части. Она сделана в приложении Vite на базе React+Redux. Для написания запросов к API использован RTK Query.
Стейты хранятся в слайсе. В самом стейте находятся currentUser, а также состояние приложения

Авторизация осуществляется с помощью стандартного пользователя Джанго, с помощью стандартной сессии. На стороне клиента данные хранятся в store и также в sessionStorage

### Ревлизация проекта
На данный момент реализовано:
 - функционал серверной части (фактически все работает, только в процессе требуется определенная доработка )
 - проверка работоспособности осуществляется с помощь тестов
 - клиентская часть реализован весь необходимый функционал, кроме
            - редактирование файлов
            - использование просмотра хранилища от имени администратора
            - редактирование пользователей
            - при удалении файла, удаляется запись в БД но не удаляется сам файл из хранилища
- для деплоя пока только сама база postgreSQL используется docker-compose, все остальное только локально

### Запуск проекта
На данный момент реализованна только возможность локального запуска
Для локального запуска бекенда нужно
Предполагается разворачивание на локальном хосте и наличие python3 и NodeJS
1. Создать файл `.env` и  установить необходимые переменные. Он должен находится в папке `backend/`

```
DB_BASE=
DB_HOST=
DB_PORT=5432
DB_USER=
DB_PASS=
DJANGO_SETTINGS_MODULE=mycloud.settings
SECRET_KEY=
DEBUG=
ALLOWED_HOSTS=*
```

2. Запустить контейнер с базой данных

```
docker-compose -f docker-compose-DB.yml up --build
```

3. Устанавливаем и запускаем само приложение

```
# переходим в папку бекенда
cd backend/

# создание и активация виртуального окружения
python3 -m venv venv
source venv/bin/activate

# устанавливаем зависимости
pip install -r requirements.txt

# делаем миграции
python manage.py migrate

# запускаем тесты
python manage.py test

# создаем административного пользователя
python manage.py createsuperuser

# запускаем приложение
python manage.py runserver localhost:8000
```





Для локального запуска фроненд приложения необходимо

1. перейти в папку `frontend`
`cd frontend/`
2. установить зависимости
`npm i`
3. запустить приложение в режиме разработки
`npm run dev`

структура файл `.env` для фронтенда
```
VITE_BASE_URL=http://localhost:8000/api
VITE_SECRET_KEY=super-secret-key
```

### Проблемы проекта
- непонятно, достаточно ли настроек для обхода ограничений CORS : хотя удается реализовать прохождение запросов, но делаю это методом тыка, поэтому не понимаю насколько настройки необходимы и достаточны
- есть ворнинги связанные со старой необновляемой библиотекой `"react-contexify": "^6.0.0"`, для использования кастомного контекстного меню (возможно переделаю на bootstrap) переделал на `rc-menu` оказалось тоде самое есть вориннг связанный с устаревшим методом
- сделал docker-compose.yml , который включает и приложение джанго серавера, но поке не работает
